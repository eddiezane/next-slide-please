<!DOCTYPE html>
<html lang="en" class="h-100 w-100">

  <head>
    <title>Controls</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/tachyons/css/tachyons.min.css">
    <style>
      .w-75 {
        width: .75rem;
      }

      .h-75 {
        height: .75rem;
      }
    </style>
  </head>

  <body class="bg-near-black gold h-100 w-100 sans-serif">
    <div v-on:keyup="handleKeypress" class="center pa3 w-100 h-100 flex justify-center items-center" id="app">
      <div>
        <div class="mb3 center fw6 f4 tc">
          <span class="w-75 h-75 br-pill bg-green dib"></span> You are controlling {{ name }}'s meeting
        </div>
        <div class="bg-gold pa2 flex br3 bw1 b--gold">
          <button class="db f-headline pa3 mr3 h5 w5 br2 bw3 b--near-black bg-near-black pointer">ðŸ‘ˆ</button>
          <button class="db f-headline pa3 ml3 h5 w5 br2 bw3 b--near-black bg-near-black pointer">ðŸ‘‰</button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const app = new Vue({
        el: '#app',
        data: {
          name: 'Kamal',
        },
        mounted() {
          const path = document.URL.split('/')
          const id = path[path.length - 1]
          console.log(id)

          const socket = io('/')
          socket.on('connect', () => {
            console.log('connect', socket.id)
            document.addEventListener('keydown', event => {
              switch(event.key) {
                case 'ArrowLeft':
                  console.log('YO I AM LEFT')
                  socket.emit('remote:keydown', { id, key: 'ArrowLeft' })
                  break
                case 'ArrowRight':
                  console.log('YO I AM RIGHT')
                  socket.emit('remote:keydown', { id, key: 'ArrowRight' })
                  break
              }
            })
          })
        },
        methods: {
          handleKeypress: function(event) {
            console.log(event)
          }
        }
      })
    </script>
  </body>

</html>
